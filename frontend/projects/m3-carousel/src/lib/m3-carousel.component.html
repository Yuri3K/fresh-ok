<div 
  class="m3-carousel"
  role="group"
  aria-roledescription="carousel"
>
  <div 
    class="m3-carousel-viewport"
    m3Swipe
    (swipeLeft)="onSwipeLeft()"
    (swipeRight)="onSwipeRigth()"
  >
    <div 
      class="m3-carousel-track"
      [style.transform]="
        'translateX(' + 
        (-carouselService.currentIndex() * (100 / 1)) + 
        '%)'
      "
    >
      @for(tpl of carouselService.slides(); track $index; let i = $index) {
        <ng-container *ngTemplateOutlet="tpl"></ng-container>
      }
        <!-- <ng-container *ngFor="let tpl of carouselService.slides(); let i = index">
        </ng-container> -->
      <!-- <ng-content select="[M3CarouselSlide]"></ng-content> -->
    </div>
  </div>

  <div class="m3-carousel-controls">
    <button
      type="button"
      mat-icon-button
      (click)="carouselService.prev()"
      aria-label="Previous slide"
    >
      <mat-icon>chevron_left</mat-icon>
    </button>

    <div 
      class="m3-carousel__dots"
      role="tablist"
      aria-label="Carousel indicators"
    >
      @for(_ of [].constructor(carouselService.slidesLength()); track $index; let i = $index) {
        <button
          type="button"
          mat-icon-button
          class="m3-carousel__dot"
          matRipple
          (click)="carouselService.goTo(i)"
          [attr.aria-selected]="carouselService.currentIndex() == i"
        >
          <mat-icon>{{ carouselService.currentIndex() === i ? 'lens' : 'radio_button_unchecked' }}</mat-icon>
        </button>
      }
    </div>


    <button
      type="button"
      mat-icon-button
      (click)="carouselService.next()"
      aria-label="Next slide"
    >
      <mat-icon>chevron_right</mat-icon>
    </button>


  </div>
</div>